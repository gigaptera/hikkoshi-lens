# 機能一覧 (Function List)

## 1. ステーション検索・フィルタリング機能

バックエンド API: `GET /api/stations/nearby` (or `search`)

### 1-1. 基本検索

- **位置情報検索**: 緯度経度 (`lat`, `lon`) を指定して、指定半径内 (`radius`、初期値 500m) の駅を検索。
- **家賃相場フィルタ**:
  - 下限 (`min_rent`) 〜 上限 (`max_rent`) の指定が可能。
  - 建物種別 (`building_type`) と 間取り (`layout`) を指定することで、より正確な相場データとの照合を行う。
    - 建物種別: マンション (`mansion`)、アパート (`apart`)、一戸建て (`detached`)
    - 間取り: ワンルーム/1K/1DK (`1r_1k_1dk`)、1LDK/2K/2DK (`1ldk_2k_2dk`)、等

### 1-2. 家賃補助・通勤検索 (Subsidy Search)

- **勤務先等の最寄り駅基準検索**:
  - `subsidy_type=from_workplace` を指定。
  - 最寄り駅から同一路線上の前後 N 駅 (`subsidy_range`、デフォルト 3 駅) を含めて検索結果として返す。
  - 検索結果には「最寄り駅からの駅数 (`stops_from_source`)」が含まれる。

## 2. スコアリング・評価機能 (Scoring)

バックエンド API: 内部ロジック (`ScoringService`)

### 2-1. 5 軸スコア算出

ユーザーが指定した重み (`weights`) に基づき、各駅の総合スコアと項目別スコアを算出。

- **Access (アクセス)**: 都心や主要駅への利便性 (現状ロジック要確認、重み対応)
- **Rent (家賃)**: 家賃相場の安さ (重み対応)
- **Facility (周辺施設)**: スーパー、コンビニ等の充実度 (重み対応)
- **Safety (治安)**: 治安の良さ (重み対応)
- **Disaster (防災)**: 自然災害リスクの低さ (重み対応)

## 3. 詳細・比較機能

バックエンド API: `GET /api/stations/{id}/three-stops`

### 3-1. 前後 3 駅比較 (Three Stops View)

- 指定した駅 (`id`) を中心に、同一路線の前後 3 駅 (計 7 駅最大) のリストを取得。
- 各駅のスコアや属性を比較可能。
- 「もう少し都心寄り」「もう少し家賃を抑えて郊外へ」といった検討を支援。

### 3-2. 駅詳細情報

- **基本情報**: 駅名、路線名、所在地。
- **スコア詳細**: 計算された各カテゴリーのスコア。
- **市場価格情報**: 指定した建物種別・間取りの家賃相場 (`rent_avg`)。
