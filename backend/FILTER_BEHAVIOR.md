# æ¤œç´¢æ¡ä»¶ã®æœ‰ç„¡ã«ã‚ˆã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®é•ã„

## æ¤œè¨¼çµæœ

### 1. æ¡ä»¶ãªã—ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:

```bash
GET /api/stations/nearby?lat=35.6812&lon=139.7671&radius=1000
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ç‰¹å¾´**:

- âœ… å…¨ã¦ã®é§…ãŒè¿”ã‚‹
- âœ… å„é§…ã®`market_prices`ã«**å…¨ã¦ã®å»ºç‰©ç¨®åˆ¥ãƒ»é–“å–ã‚Š**ãŒå«ã¾ã‚Œã‚‹
- ğŸ“Š 1 é§…ã‚ãŸã‚Šç´„ 15 ä»¶ã® market_pricesï¼ˆmansion/apart/detached Ã— 5 ç¨®é¡ã®é–“å–ã‚Šï¼‰

**ä¾‹**ï¼ˆäºŒé‡æ©‹å‰é§…ï¼‰:

```json
{
  "name": "äºŒé‡æ©‹å‰",
  "distance": 487.73,
  "market_prices_count": 15,
  "market_prices_sample": [
    {
      "building_type": "mansion",
      "layout": "1r_1k_1dk",
      "rent": 4.8
    },
    {
      "building_type": "mansion",
      "layout": "1ldk_2k_2dk",
      "rent": 6.24
    },
    {
      "building_type": "apart",
      "layout": "1r_1k_1dk",
      "rent": 4.0
    }
    // ... å…¨15ä»¶
  ]
}
```

### 2. å»ºç‰©ç¨®åˆ¥ã®ã¿æŒ‡å®š

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:

```bash
GET /api/stations/nearby?lat=35.6812&lon=139.7671&radius=1000&building_type=mansion
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ç‰¹å¾´**:

- âœ… é§…æ•°ã¯å¤‰ã‚ã‚‰ãªã„ï¼ˆåŒã˜ 26 é§…ï¼‰
- âš¡ `market_prices`ãŒ**mansion ã®ã¿**ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- ğŸ“Š 1 é§…ã‚ãŸã‚Š 5 ä»¶ã® market_pricesï¼ˆmansion Ã— 5 ç¨®é¡ã®é–“å–ã‚Šï¼‰

**ä¾‹**ï¼ˆäºŒé‡æ©‹å‰é§…ï¼‰:

```json
{
  "name": "äºŒé‡æ©‹å‰",
  "distance": 487.73,
  "market_prices_count": 5,
  "market_prices_sample": [
    {
      "building_type": "mansion",
      "layout": "1r_1k_1dk",
      "rent": 4.8
    },
    {
      "building_type": "mansion",
      "layout": "1ldk_2k_2dk",
      "rent": 6.24
    }
    // ... mansionã®ã¿5ä»¶
  ]
}
```

### 3. å»ºç‰©ç¨®åˆ¥ + é–“å–ã‚ŠæŒ‡å®š

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:

```bash
GET /api/stations/nearby?lat=35.6812&lon=139.7671&radius=1000&building_type=mansion&layout=1r_1k_1dk
```

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ç‰¹å¾´**:

- âœ… é§…æ•°ã¯å¤‰ã‚ã‚‰ãªã„ï¼ˆåŒã˜ 26 é§…ï¼‰
- âš¡ `market_prices`ãŒ**mansion Ã— 1r_1k_1dk ã®ã¿**ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- ğŸ“Š 1 é§…ã‚ãŸã‚Š 1 ä»¶ã® market_prices

**ä¾‹**ï¼ˆäºŒé‡æ©‹å‰é§…ï¼‰:

```json
{
  "name": "äºŒé‡æ©‹å‰",
  "distance": 487.73,
  "market_prices_count": 1,
  "market_prices_sample": [
    {
      "building_type": "mansion",
      "layout": "1r_1k_1dk",
      "rent": 4.8
    }
  ]
}
```

## é‡è¦ãªä»•æ§˜

### ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã®å‹•ä½œ

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿             | å½±éŸ¿ç¯„å›²                 | èª¬æ˜                                   |
| ---------------------- | ------------------------ | -------------------------------------- |
| `lat`, `lon`, `radius` | **é§…ã®ä»¶æ•°**             | åœ°ç†çš„ãªçµã‚Šè¾¼ã¿                       |
| `building_type`        | **market_prices ã®å†…å®¹** | é§…ã¯æ¸›ã‚‰ãªã„ã€ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| `layout`               | **market_prices ã®å†…å®¹** | é§…ã¯æ¸›ã‚‰ãªã„ã€ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |
| `min_rent`, `max_rent` | **market_prices ã®å†…å®¹** | é§…ã¯æ¸›ã‚‰ãªã„ã€ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ |

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

**æ¡ä»¶ãªã—**:

```
é§…A
â”œâ”€ mansion, 1r_1k_1dk: Â¥48,000
â”œâ”€ mansion, 1ldk_2k_2dk: Â¥62,400
â”œâ”€ mansion, 2ldk_3k_3dk: Â¥76,800
â”œâ”€ mansion, 3ldk_4k: Â¥96,000
â”œâ”€ mansion, 4ldk: Â¥120,000
â”œâ”€ apart, 1r_1k_1dk: Â¥40,000
â”œâ”€ apart, 1ldk_2k_2dk: Â¥52,000
â”œâ”€ apart, 2ldk_3k_3dk: Â¥64,000
â”œâ”€ apart, 3ldk_4k: Â¥80,000
â”œâ”€ apart, 4ldk: Â¥100,000
â”œâ”€ detached, 1r_1k_1dk: Â¥32,000
â”œâ”€ detached, 1ldk_2k_2dk: Â¥41,600
â”œâ”€ detached, 2ldk_3k_3dk: Â¥51,200
â”œâ”€ detached, 3ldk_4k: Â¥64,000
â””â”€ detached, 4ldk: Â¥80,000
```

**building_type=mansion æŒ‡å®š**:

```
é§…A
â”œâ”€ mansion, 1r_1k_1dk: Â¥48,000
â”œâ”€ mansion, 1ldk_2k_2dk: Â¥62,400
â”œâ”€ mansion, 2ldk_3k_3dk: Â¥76,800
â”œâ”€ mansion, 3ldk_4k: Â¥96,000
â””â”€ mansion, 4ldk: Â¥120,000
```

**building_type=mansion&layout=1r_1k_1dk æŒ‡å®š**:

```
é§…A
â””â”€ mansion, 1r_1k_1dk: Â¥48,000
```

## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§ã®æ´»ç”¨æ–¹æ³•

### UI è¡¨ç¤ºã®æ¨å¥¨

1. **æ¡ä»¶ãªã—**: ã€Œãƒãƒ³ã‚·ãƒ§ãƒ³ Â¥4.8 ä¸‡ã€œã€ã‚¢ãƒ‘ãƒ¼ãƒˆ Â¥4.0 ä¸‡ã€œã€ã®ã‚ˆã†ã«ç¯„å›²è¡¨ç¤º
2. **building_type æŒ‡å®š**: ã€ŒÂ¥4.8 ä¸‡ã€œÂ¥12 ä¸‡ã€ã®ã‚ˆã†ã«è©²å½“ç¨®åˆ¥ã®ç¯„å›²è¡¨ç¤º
3. **building_type+layout æŒ‡å®š**: ã€ŒÂ¥4.8 ä¸‡ã€ã®ã‚ˆã†ã«ãƒ”ãƒ³ãƒã‚¤ãƒ³ãƒˆè¡¨ç¤º

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚µã‚¤ã‚ºã®é•ã„

- **æ¡ä»¶ãªã—**: 1 é§…ã‚ãŸã‚Šç´„ 1.5KBï¼ˆ15 ä»¶ã® market_pricesï¼‰
- **building_type æŒ‡å®š**: 1 é§…ã‚ãŸã‚Šç´„ 0.5KBï¼ˆ5 ä»¶ï¼‰
- **ä¸¡æ–¹æŒ‡å®š**: 1 é§…ã‚ãŸã‚Šç´„ 0.1KBï¼ˆ1 ä»¶ï¼‰

100 é§…ã®å ´åˆã€æ¡ä»¶ãªã—ã ã¨ç´„ 150KBã€ä¸¡æ–¹æŒ‡å®šã ã¨ç´„ 10KB ã¨ãªã‚Šã€**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå¤§å¹…ã«å‘ä¸Š**ã—ã¾ã™ã€‚

## ã¾ã¨ã‚

âœ… **æ¡ä»¶ãªã— = å…¨ãƒ‡ãƒ¼ã‚¿è¿”å´**

- å…¨ã¦ã® building_type Ã— layout ã®çµ„ã¿åˆã‚ã›ï¼ˆæœ€å¤§ 15 ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã§æŸ”è»Ÿã«è¡¨ç¤ºå¯èƒ½
- ãƒ‡ãƒ¼ã‚¿é‡ã¯å¤šã„

âœ… **æ¡ä»¶ã‚ã‚Š = çµã‚Šè¾¼ã¿ãƒ‡ãƒ¼ã‚¿è¿”å´**

- æŒ‡å®šã—ãŸæ¡ä»¶ã«åˆè‡´ã™ã‚‹ market_prices ã®ã¿
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚µã‚¤ã‚ºãŒå°ã•ã„
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š

ã“ã®ä»•æ§˜ã«ã‚ˆã‚Šã€**ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ¡ä»¶ã‚’é¸ã¶ã»ã©ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè»½é‡åŒ–**ã•ã‚Œã€å¿«é©ãªæ¤œç´¢ä½“é¨“ã‚’æä¾›ã§ãã¾ã™ã€‚
